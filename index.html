<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Extra-Time • NamibiaSports — Complete Sports Platform</title>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YZKJRX2X52"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-YZKJRX2X52');
    </script>

    <!-- Your complete CSS styles (keep all your CSS as is) -->
    <style>
        /* ALL YOUR CSS STYLES STAY HERE - Don't change them */
        /* ... your entire CSS code ... */
    </style>
</head>

<body class="accent-orange">

    <!-- News Container -->
    <div id="news" style="display: none;">
        <div class="container">
            <h2 class="section-title">Latest Sports News</h2>
            <div id="news-content"></div>
        </div>
    </div>

    <!-- All your HTML content stays here -->
    <!-- Header, navigation, pages, footer - keep everything as is -->
    
    <!-- Your SVG icons stay here -->
    <svg style="display:none" aria-hidden="true" focusable="false">
        <!-- All your SVG icons -->
    </svg>

    <!-- All your page content stays here -->
    <!-- Home page, sports pages, about, login, etc. -->

    <!-- JavaScript Fixes -->
    <script>
        // ============== NEWS LOADING ==============
        async function loadNews() {
            try {
                console.log('Loading news...');
                const response = await fetch('/news');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const news = await response.json();
                console.log('News loaded:', news);
                
                const newsContainer = document.getElementById('news-content');
                const newsSection = document.getElementById('news');
                
                if (news.length > 0) {
                    newsContainer.innerHTML = news.map(item => `
                        <div class="story-card hover-lift" style="margin: 15px 0; padding: 20px; background: var(--card); border-radius: 8px;">
                            ${item.image ? `<img src="/uploads/${item.image}" alt="${item.title}" style="width: 100%; max-width: 300px; border-radius: 4px; margin-bottom: 15px;">` : ''}
                            <h3 style="color: var(--accent); margin-bottom: 10px;">${item.title}</h3>
                            <p style="color: var(--text); margin-bottom: 10px;">${item.content}</p>
                            <div style="display: flex; justify-content: space-between; color: var(--text-muted); font-size: 0.9rem;">
                                <span>${item.category || 'General'}</span>
                                <span>${new Date(item.createdAt).toLocaleDateString()}</span>
                            </div>
                        </div>
                    `).join('');
                    
                    if (newsSection) {
                        newsSection.style.display = 'block';
                    }
                } else {
                    newsContainer.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 40px;">No news articles yet. Check back soon!</p>';
                    if (newsSection) {
                        newsSection.style.display = 'block';
                    }
                }
            } catch (error) {
                console.error('Error loading news:', error);
                const newsContainer = document.getElementById('news-content');
                if (newsContainer) {
                    newsContainer.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                            <p>Unable to load news at the moment.</p>
                            <p>Please try again later.</p>
                        </div>
                    `;
                }
            }
        }

        // ============== PAGE MANAGEMENT ==============
        const pages = {
            'home': 'home-page',
            'football': 'football-page',
            'rugby': 'rugby-page',
            'athletics': 'athletics-page',
            'boxing': 'boxing-page',
            'mma': 'mma-page',
            'golf': 'golf-page',
            'hockey': 'hockey-page',
            'basketball': 'basketball-page',
            'netball': 'netball-page',
            'cycling': 'cycling-page',
            'cricket': 'cricket-page',
            'futsal': 'futsal-page',
            'snooker': 'snooker-page',
            'volleyball': 'volleyball-page',
            'about': 'about-page',
            'login': 'login-page',
            'signup': 'signup-page',
            'profile': 'profile-page'
        };

        function showPage(pageId) {
            // Hide all pages
            Object.values(pages).forEach(page => {
                const element = document.getElementById(page);
                if (element) {
                    element.classList.remove('active-page', 'fade-in');
                    element.style.display = 'none';
                }
            });

            // Show selected page
            const pageElement = document.getElementById(pages[pageId]);
            if (pageElement) {
                pageElement.style.display = 'block';
                setTimeout(() => {
                    pageElement.classList.add('active-page', 'fade-in');
                }, 10);
            }

            // Update navigation
            document.querySelectorAll('.sports-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Update sports navigation if it's a sports page
            if (pages[pageId].includes('-page')) {
                const sportLinks = document.querySelectorAll('.sports-link');
                sportLinks.forEach(link => {
                    if (link.textContent.toLowerCase().includes(pageId)) {
                        link.classList.add('active');
                    }
                });
            }

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // Close menus if open
            if (document.getElementById('sideMenu')?.classList.contains('active')) {
                toggleMenu();
            }

            // Load page-specific content
            if (pageId === 'home') {
                loadNews();
            }
        }

        // ============== INITIALIZATION ==============
        document.addEventListener('DOMContentLoaded', function() {
            // Show home page by default
            showPage('home');
            
            // Load news on home page
            loadNews();
            
            // Initialize all event listeners
            initializeEventListeners();
        });

        function initializeEventListeners() {
            // Sports navigation
            document.querySelectorAll('.sports-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const sport = this.textContent.trim().toLowerCase();
                    showPage(sport);
                });
            });

            // Logo home button
            document.querySelector('.logo-circle')?.addEventListener('click', function(e) {
                e.preventDefault();
                showPage('home');
            });

            // Side menu links
            document.querySelectorAll('.side-menu button, .side-menu a').forEach(item => {
                item.addEventListener('click', function(e) {
                    const text = this.textContent.trim().toLowerCase();
                    if (text.includes('home')) showPage('home');
                    else if (text.includes('tv')) showPage('home');
                    else if (text.includes('fixtures')) showPage('home');
                    else if (text.includes('community')) showPage('home');
                    else if (text.includes('about')) showPage('about');
                    else if (text.includes('advertise')) showPage('home');
                    else if (text.includes('profile')) showPage('profile');
                    else if (text.includes('login')) showPage('login');
                    else if (text.includes('sign up')) showPage('signup');
                });
            });

            // Footer links
            document.querySelectorAll('.footer-links button').forEach(button => {
                button.addEventListener('click', function() {
                    const text = this.textContent.trim().toLowerCase();
                    if (text.includes('football')) showPage('football');
                    else if (text.includes('rugby')) showPage('rugby');
                    else if (text.includes('athletics')) showPage('athletics');
                    else if (text.includes('boxing')) showPage('boxing');
                    else if (text.includes('mma')) showPage('mma');
                    else if (text.includes('golf')) showPage('golf');
                    else if (text.includes('hockey')) showPage('hockey');
                    else if (text.includes('basketball')) showPage('basketball');
                    else if (text.includes('netball')) showPage('netball');
                    else if (text.includes('cycling')) showPage('cycling');
                    else if (text.includes('cricket')) showPage('cricket');
                    else if (text.includes('futsal')) showPage('futsal');
                    else if (text.includes('snooker')) showPage('snooker');
                    else if (text.includes('volleyball')) showPage('volleyball');
                    else if (text.includes('about')) showPage('about');
                });
            });

            // Headlines click
            document.querySelectorAll('.headline-item').forEach(item => {
                item.addEventListener('click', function() {
                    const text = this.textContent.trim().toLowerCase();
                    if (text.includes('football') || text.includes('warriors') || text.includes('afcon')) showPage('football');
                    else if (text.includes('rugby') || text.includes('welwitschias')) showPage('rugby');
                    else if (text.includes('cricket') || text.includes('t20')) showPage('cricket');
                    else if (text.includes('basketball')) showPage('basketball');
                    else if (text.includes('athletics') || text.includes('mboma')) showPage('athletics');
                    else if (text.includes('boxing') || text.includes('simon')) showPage('boxing');
                });
            });
        }

        // ============== MENU FUNCTIONS ==============
        function toggleMenu() {
            const sideMenu = document.getElementById('sideMenu');
            const overlay = document.getElementById('overlay');
            const hamburger = document.querySelector('.hamburger');
            
            if (sideMenu.classList.contains('active')) {
                sideMenu.classList.remove('active');
                overlay.style.display = 'none';
                hamburger.classList.remove('active');
                document.body.style.overflow = '';
            } else {
                sideMenu.classList.add('active');
                overlay.style.display = 'block';
                hamburger.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown.classList.contains('active')) {
                dropdown.classList.remove('active');
            } else {
                dropdown.classList.add('active');
            }
        }

        // ============== THEME FUNCTIONS ==============
        function setMode(mode) {
            const body = document.body;
            if (mode === 'light') {
                body.classList.add('light-mode');
                localStorage.setItem('et_theme', 'light');
            } else {
                body.classList.remove('light-mode');
                localStorage.setItem('et_theme', 'dark');
            }
        }

        function setAccent(accent) {
            const body = document.body;
            body.classList.remove('accent-orange', 'accent-blue', 'accent-purple', 'accent-green', 'accent-pink', 'accent-yellow', 'accent-red');
            body.classList.add(accent);
            localStorage.setItem('et_accent', accent);
        }

        // Load saved preferences
        window.addEventListener('load', function() {
            const savedTheme = localStorage.getItem('et_theme');
            const savedAccent = localStorage.getItem('et_accent');
            
            if (savedTheme === 'light') {
                setMode('light');
            }
            
            if (savedAccent) {
                setAccent(savedAccent);
            }
        });

        // ============== SEARCH FUNCTIONALITY ==============
        function toggleSearch() {
            const searchOverlay = document.querySelector('.search-overlay');
            const searchInput = document.querySelector('.search-input');
            
            if (searchOverlay.style.display === 'block') {
                searchOverlay.style.display = 'none';
                document.body.style.overflow = '';
            } else {
                searchOverlay.style.display = 'block';
                document.body.style.overflow = 'hidden';
                searchInput.focus();
            }
        }

        // ============== NEWSLETTER ==============
        function subscribeNewsletter(event) {
            event.preventDefault();
            const email = event.target.querySelector('input[type="email"]').value;
            
            if (email) {
                alert('Thank you for subscribing to our newsletter!');
                event.target.reset();
            }
        }

        // ============== AUTH FUNCTIONS ==============
        function handleLogin(event) {
            event.preventDefault();
            alert('Login functionality will be available soon!');
            // In production, this would call your backend API
        }

        function handleSignup(event) {
            event.preventDefault();
            alert('Signup functionality will be available soon!');
            // In production, this would call your backend API
        }
    </script>

</body>
</html>